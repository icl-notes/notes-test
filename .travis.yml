dist: xenial
language: minimal

git:
  quiet: true
  submodules: false

branches:
  only:
  - master
  - deploy

env:
- NOTES_FILE=test

services:
- docker

script:
- docker run --rm -v $(pwd):/notes blang/latex /bin/bash -c "cd /notes; ./build.sh $NOTES_FILE"
- "./test.sh $NOTES_FILE"

deploy:
  provider: releases
  api_key:
    secure: LBSth3QkZDkukhzcO83EimBpkE7pk1Nl9/gwU4Ay4XSJvZ8YYPIm3IvGpRH9dZMFe9ngKjT0JwFuTJCH5TfERfSbF6p/0eS1Ai0+7nCi2yPXNpwGMnxqEglc1LsvZrPJsszf5hCQiCutEn/tJ+OcjMISopbhDHdbIEnqTr25JbfRfCmgRaA4Phvie/VQr5VC4jE8gxsdW5b0quf/2WSLdS1STMPodhxNAfPcdNcuIngt/f6diTp4OcTSWPdPU0vLYv3cJlDQRwELyz7kt6RUKoQKKwHIeK8+q6v/yFeiox2H/60T2SKaxpRcYd6HgJ7NyHJqUu1kYMhQ6Iq+PVBcUQRB1ycOy54uKPluO1cR0CTof+n5B1P7sbPmBz1GBgwRnAznCX1eOdCKIqBR/jkUo7AW58fydhydKhERwN0aEdJZoTL5oH285BM0hLJwqc/T2Ld58CLZowpP02uFsdzTIRhmz3q+hSW8ow5yNNrCJUk+YoTJh/uyqo2wRK8fQDVbnxTBfTP2lPuN7dh7PtqxSHiiMwCL/Q5u6WGDVqQefQhf9XhS1XDYbvh71IBF+kfoIfmTRQvgSPTU87nPZydpyA5qdPkbCx/uu6QIkab04AC/4GhauuYFfOSyn6M+Sm4dQmpXgC5dg+QbVA6HMxVmu7miAfDQ5Rr5KQtZiYjyhYs=
  file: $NOTES_FILE.pdf
  on:
    repo: icl-notes/notes-test
